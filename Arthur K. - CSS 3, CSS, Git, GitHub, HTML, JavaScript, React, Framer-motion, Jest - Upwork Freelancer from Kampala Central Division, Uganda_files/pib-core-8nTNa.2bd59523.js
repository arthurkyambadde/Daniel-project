(window.webpackJsonp=window.webpackJsonp||[]).push([[876],{1631:function(e,t,n){"use strict";var r=n(941);const c="/freelancers/api/v1/profile/me/pib";var o={getStatus:e=>e({cache:!1,handleApiErrors:!1}).url("".concat(c,"/status")).get().json(),getStatuses:(e,t)=>e({cache:!1,handleApiErrors:!1}).url("".concat(c,"/statuses?profileUids=").concat(t.join(","))).get().json(),getIsViewedRecently:e=>e({cache:!0,handleApiErrors:!1}).url("".concat(c,"/is-viewed-recently")).get().json(),postTurnOff:(e,t)=>e({cache:!1,handleApiErrors:!1}).url("".concat(c,"/off")).post({reason:t}).json(),postTurnOn:(e,t)=>e({cache:!1,handleApiErrors:!1}).url("".concat(c,"/on")).post({maxPrice:t}).json()};var l={namespaced:!0,state:()=>({isFetching:!1,context:{isFreelancer:!1,isAgency:!1,hasAgencies:!1,currentAgencyName:null},availability:{capacity:null},visibility:null,personUid:null,active:!1,currentPrice:-1,maxPrice:-1,consumedConnectFraction:null,eligible:!1,availableConnects:-1,statuses:{},isViewedRecentlyFetching:!1,isViewedRecentlyFetched:!1,isViewedRecently:null}),mutations:{setFetching(e,t){e.isFetching=t},setStatus(e,t){let{personUid:n,active:r,currentPrice:c,maxPrice:o,consumedConnectFraction:l,eligible:h,availableConnects:y}=t;e.personUid=n,e.active=r,e.currentPrice=c,e.maxPrice=o,e.consumedConnectFraction=l,e.eligible=h,e.availableConnects=y},setContext(e,t){let{isFreelancer:n,isAgency:r,hasAgencies:c,currentAgencyName:o}=t;if("boolean"!=typeof n)throw new TypeError("`isFreelancer` should be a boolean.");if("boolean"!=typeof r)throw new TypeError("`isAgency` should be a boolean.");if("boolean"!=typeof c)throw new TypeError("`hasAgencies` should be a boolean.");if("string"!=typeof o&&null!==o)throw new TypeError("`currentAgencyName` should either be a string or null.");e.context.isFreelancer=n,e.context.isAgency=r,e.context.hasAgencies=c,e.context.currentAgencyName=o},setAvailability(e,t){let{capacity:n}=t;if(void 0===n)throw new TypeError("`capacity` should be defined.");e.availability.capacity=n},setVisibility(e,t){if("number"!=typeof t||Number.isNaN(t))throw new TypeError("`visibility` should be a number.");e.visibility=t},setActive(e,t){if("boolean"!=typeof t)throw new TypeError("`active` should be a boolean.");e.active=t},setMaxPrice(e,t){if("number"!=typeof t||Number.isNaN(t))throw new TypeError("`maxPrice` should be a number.");e.maxPrice=t},setStatuses(e,t){if(Array.isArray(t)||"object"!=typeof t)throw new TypeError("`statuses` should be an object.");if(Object.keys(t).find((e=>"boolean"!=typeof t[e])))throw new TypeError("`statuses` object should contain only booleans.");e.statuses=t},setIsViewedRecentlyFetching(e,t){e.isViewedRecentlyFetching=t},setIsViewedRecentlyFetched(e,t){e.isViewedRecentlyFetched=t},setIsViewedRecently(e,t){e.isViewedRecently=t}},getters:{getStatus:e=>t=>!!e.statuses[t]},actions:{async fetchStatus(e){let{commit:t}=e;try{t("setFetching",!0);const e=await o.getStatus(this.$http);t("setStatus",e),t("setContext",e.context),t("setAvailability",e.availability),t("setVisibility",e.visibility),t("setFetching",!1)}catch(e){throw t("setFetching",!1),console.error("Failed to fetchStatus.",e),e}},async fetchStatuses(e,t){let{commit:n}=e,{profileUids:r}=t;try{n("setStatuses",(await o.getStatuses(this.$http,r)).statuses)}catch(e){throw console.error("Failed to fetchStatuses.",e),e}},async fetchIsViewedRecently(e){let{commit:t}=e;try{t("setIsViewedRecentlyFetching",!0);t("setIsViewedRecently",(await o.getIsViewedRecently(this.$http)).viewedRecently),t("setIsViewedRecentlyFetched",!0)}catch(e){throw console.error("Failed to fetchIsViewedRecently.",e),e}finally{t("setIsViewedRecentlyFetching",!1)}},async turnOff(e,t){let{commit:n}=e,{reason:r}=t;try{await o.postTurnOff(this.$http,r),n("setActive",!1)}catch(e){throw console.error("Failed to turnOff.",e),e}},async turnOn(e,t){let{commit:n}=e,{maxPrice:r}=t;try{await o.postTurnOn(this.$http,r),n("setActive",!0)}catch(e){throw console.error("Failed to turnOn.",e),e}},async setMaxPrice(e,t){let{commit:n}=e,{maxPrice:r}=t;try{await o.postTurnOff(this.$http,"System limitation. Turning off, before setting a new price."),await o.postTurnOn(this.$http,r),n("setMaxPrice",r)}catch(e){throw console.error("Failed to setMaxPrice.",e),e}}}},h={beforeCreate(){var e,t;null!==(e=(t=this.$store).hasModule)&&void 0!==e&&e.call(t,r.a)||this.$store._modules.get([r.a])||this.$store.registerModule(r.a,l,{preserveState:!!this.$store.state[r.a]})}},y=n(3),component=Object(y.a)(h,undefined,undefined,!1,null,null,null);t.a=component.exports},3175:function(e,t,n){"use strict";n.r(t);var r=n(941),c={mixins:[n(1631).a],props:{isOwner:{type:Boolean,default:!1},profileUids:{type:Array,default:()=>[]}},watch:{profileUids:{immediate:!0,handler(e){e.length&&this.fetchStatuses(e)}}},async created(){this.isOwner&&(await this.$store.dispatch("".concat(r.a,"/fetchStatus")),this.$emit("status-fetch"))},methods:{async fetchStatuses(e){await this.$store.dispatch("".concat(r.a,"/fetchStatuses"),{profileUids:e})}}},o=n(3),component=Object(o.a)(c,(function(){return(0,this._self._c)("div")}),[],!1,null,null,null);t.default=component.exports},941:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r="pib"}}]);
//# sourceMappingURL=https://upwork-usw2-staging-assets-jsmaps.s3.us-west-2.amazonaws.com/FreelancerProfileNuxt/pib-core-8nTNa.2bd59523.js.map